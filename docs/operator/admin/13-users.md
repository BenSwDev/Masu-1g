# 👥 בדיקות OPERATOR - ניהול משתמשים

## 🎯 מטרת הבדיקה
וידוא שמערכת ניהול המשתמשים עובדת תקין ומאפשרת לאדמין לנהל משתמשים, הרשאות ופעולות אבטחה.

## 📍 נתיב הגישה
`/dashboard/admin/users`

## 🚨 **אזהרת בטיחות**: עמוד זה מכיל פעולות רגישות ביותר!

## 🔐 בדיקות הרשאות

### 1.1 גישה מנהל בלבד
**פעולה**: נווט לדף עם משתמש מנהל
**תוצאה צפויה**: גישה מלאה לכל המשתמשים

### 1.2 חסימת גישה לא-מנהל
**פעולה**: נסה גישה עם משתמש רגיל/מטפל/שותף
**תוצאה צפויה**: הפניה או שגיאה 403

### 1.3 בדיקת הרשאות מיוחדות
**פעולה**: וודא שרק Super Admin יכול לערוך מנהלים אחרים
**תוצאה צפויה**: הגבלות מתאימות לפי רמת הרשאה

## 📊 בדיקות תצוגת נתונים

### 2.1 טעינת רשימת משתמשים
**פעולה**: טען את הדף
**תוצאה צפויה**:
```
✅ רשימת משתמשים מוצגת
✅ כל משתמש כולל: שם, מייל, תפקידים, סטטוס, תאריך הצטרפות
✅ Pagination עובד
✅ מיון לפי תאריך הצטרפות (חדש לישן)
```

### 2.2 פרטי משתמש מפורטים
**פעולה**: לחץ על משתמש לצפייה בפרטים
**תוצאה צפויה**:
```
✅ פרטים אישיים מלאים
✅ היסטוריית הזמנות
✅ רשימת תפקידים והרשאות
✅ פעילות אחרונה
✅ פרטי התחברות
```

### 2.3 סטטיסטיקות משתמשים
**פעולה**: בדוק הצגת סטטיסטיקות כלליות
**תוצאה צפויה**:
```
✅ סה"כ משתמשים
✅ התפלגות לפי תפקידים
✅ משתמשים פעילים/לא פעילים
✅ הצטרפויות חדשות השבוע/חודש
```

## 🔍 בדיקות מסננים וחיפוש

### 3.1 מסנן לפי תפקיד
**פעולה**: 
1. בחר תפקיד ספציפי (member/professional/partner/admin)
2. וודא שמוצגים רק משתמשים עם תפקיד זה

**תוצאה צפויה**: מסנן עובד ומציג תוצאות נכונות

### 3.2 מסנן לפי סטטוס
**פעולה**:
1. בחר "פעילים" - וודא שמוצגים רק משתמשים פעילים
2. בחר "לא פעילים" - וודא שמוצגים משתמשים לא פעילים

### 3.3 מסנן לפי תאריך הצטרפות
**פעולה**: בחר טווח תאריכים והתאם את התוצאות

### 3.4 חיפוש חופשי
**פעולה**:
1. חפש לפי שם משתמש
2. חפש לפי כתובת מייל
3. חפש לפי מספר טלפון

**תוצאה צפויה**: חיפוש מחזיר תוצאות רלוונטיות

## ✏️ בדיקות עריכת משתמשים

### 4.1 עריכת פרטים בסיסיים
**פעולה**:
1. בחר משתמש ולחץ "ערוך"
2. שנה שם/טלפון/פרטים
3. שמור שינויים

**תוצאה צפויה**:
```
✅ שינויים נשמרים בהצלחה
✅ הודעת אישור מוצגת
✅ רשימת המשתמשים מתעדכנת
✅ לוג שינויים נרשם
```

### 4.2 ניהול תפקידים והרשאות
**פעולה**:
1. בחר משתמש
2. הוסף/הסר תפקידים (member, professional, partner, admin)
3. שמור שינויים

**תוצאה צפויה**:
```
✅ תפקידים מתעדכנים
✅ הרשאות משתנות בהתאם
✅ הודעה נשלחת למשתמש (אם מוגדר)
⚠️ אזהרה מיוחדת כשמוסיפים הרשאות מנהל
```

### 4.3 הפעלה/השעיה של משתמש
**פעולה**:
1. בחר משתמש פעיל ולחץ "השעה"
2. הזן סיבת השעיה
3. אשר השעיה

**תוצאה צפויה**:
```
✅ משתמש מושעה
✅ כל הסשנים שלו מבוטלים
✅ אין גישה למערכת
✅ הודעה נשלחת למשתמש
```

## 🔑 בדיקות ניהול סיסמאות (רגיש!)

### 5.1 איפוס סיסמה עבור משתמש
**פעולה**:
1. בחר משתמש
2. לחץ "אפס סיסמה"
3. בחר שיטה (מייל או יצירת סיסמה זמנית)

**תוצאה צפויה**:
```
✅ מייל איפוס נשלח למשתמש
✅ טוקן איפוס נוצר במערכת
✅ הודעה נרשמת בלוג האבטחה
⚠️ סיסמה זמנית מוצגת פעם אחת בלבד
```

### 5.2 כפיית שינוי סיסמה
**פעולה**: הגדר למשתמש שחייב לשנות סיסמה בכניסה הבאה
**תוצאה צפויה**: במסך הכניסה הבא יתבקש לשנות סיסמה

### 5.3 צפייה בפעילות כניסות
**פעולה**: בדוק היסטוריית כניסות של משתמש
**תוצאה צפויה**:
```
✅ רשימת כניסות לאחרונה
✅ כתובות IP
✅ זמנים ותאריכים
✅ סטטוס (הצלחה/כישלון)
```

## 🗑️ בדיקות מחיקה והשעיה

### 6.1 השעיה זמנית
**פעולה**:
1. השעה משתמש לתקופה מוגדרת
2. הגדר תאריך חזרה לפעילות

**תוצאה צפויה**: משתמש חוזר לפעילות אוטומטית

### 6.2 מחיקת חשבון משתמש (זהירות!)
**פעולה**:
1. בחר משתמש לבדיקה (לא אמיתי!)
2. לחץ "מחק חשבון"
3. אשר מחיקה

**תוצאה צפויה**:
```
✅ אזהרות חמורות מרובות
✅ דרישה לאישור כפול
✅ סיבת מחיקה חובה
✅ גיבוי נתונים לפני מחיקה
✅ מחיקה soft (סימון כמחוק)
```

## 📧 בדיקות תקשורת

### 7.1 שליחת הודעות למשתמש
**פעולה**:
1. בחר משתמש
2. שלח הודעה (מייל/SMS/התראה באפליקציה)

**תוצאה צפויה**: הודעה נשלחת בהצלחה

### 7.2 התראות מערכת
**פעולה**: שלח התראת מערכת לכל המשתמשים או לקבוצה
**תוצאה צפויה**: התראה מגיעה לנמענים

### 7.3 הודעות אבטחה
**פעולה**: שלח הודעה על שינוי בהרשאות או אבטחה
**תוצאה צפויה**: הודעת אבטחה מתאימה נשלחת

## 📊 בדיקות דיווח ואנליטיקה

### 8.1 דוח משתמשים לתקופה
**פעולה**: צור דוח הצטרפויות לתקופה מסוימת
**תוצאה צפויה**:
```
✅ מספר הצטרפויות חדשות
✅ התפלגות לפי תפקידים
✅ סטטיסטיקות פעילות
✅ מגמות צמיחה
```

### 8.2 דוח פעילות משתמשים
**פעולה**: צור דוח פעילות משתמשים פעילים
**תוצאה צפויה**: נתונים על שימוש והתנהגות

### 8.3 ייצוא נתוני משתמשים
**פעולה**: ייצא רשימת משתמשים עם מסננים
**תוצאה צפויה**: קובץ CSV/Excel מתקבל

## 🔒 בדיקות אבטחה מתקדמות

### 9.1 בדיקת 2FA (Two Factor Authentication)
**פעולה**: הפעל/בטל 2FA למשתמש
**תוצאה צפויה**: הגדרות 2FA מתעדכנות

### 9.2 ניטור כניסות חשודות
**פעולה**: בדוק התראות על כניסות חשודות
**תוצאה צפויה**: מערכת מזהה דפוסים חשודים

### 9.3 חסימת IP כתובות
**פעולה**: חסום כתובת IP ספציפית
**תוצאה צפויה**: IP חסום ולא יכול להתחבר

## 📱 בדיקות רספונסיביות

### 10.1 תצוגה במכשירים שונים
**פעולה**: בדוק בDesktop/Tablet/Mobile
**תוצאה צפויה**:
```
✅ טבלה מתכווצת במובייל
✅ כפתורי פעולה נגישים
✅ מסננים עובדים בכל המסכים
✅ פרטי משתמש נראים טוב
```

## ⚠️ בדיקות שגיאות

### 11.1 שגיאות validation
**פעולה**: נסה לשמור נתונים לא תקינים
**תוצאה צפויה**: הודעות שגיאה ברורות בעברית

### 11.2 שגיאות רשת
**פעולה**: נתק אינטרנט ונסה פעולות
**תוצאה צפויה**: הודעות שגיאה מתאימות

### 11.3 הרשאות חסרות
**פעולה**: נסה פעולות מנהל עם משתמש רגיל
**תוצאה צפויה**: חסימה מלאה והודעה מתאימה

## ✅ דוח בדיקות - טמפלט

```
👥 USERS ADMIN - דוח בדיקות

📅 תאריך: ___________
👤 בודק: ___________
🌐 דפדפן: ___________

=== בדיקות הרשאות ===
[ ] גישה מנהל בלבד
[ ] חסימת גישה לא-מנהל
[ ] הרשאות מיוחדות

=== תצוגת נתונים ===
[ ] טעינת רשימת משתמשים
[ ] פרטי משתמש מפורטים
[ ] סטטיסטיקות משתמשים

=== מסננים וחיפוש ===
[ ] מסנן תפקיד
[ ] מסנן סטטוס
[ ] מסנן תאריך
[ ] חיפוש חופשי

=== עריכת משתמשים ===
[ ] עריכת פרטים בסיסיים
[ ] ניהול תפקידים
[ ] הפעלה/השעיה

=== ניהול סיסמאות ===
[ ] איפוס סיסמה
[ ] כפיית שינוי סיסמה
[ ] היסטוריית כניסות

=== מחיקה והשעיה ===
[ ] השעיה זמנית
[ ] מחיקת חשבון (זהירות!)

=== תקשורת ===
[ ] הודעות למשתמש
[ ] התראות מערכת
[ ] הודעות אבטחה

=== דיווח ואנליטיקה ===
[ ] דוח לתקופה
[ ] דוח פעילות
[ ] ייצוא נתונים

=== אבטחה מתקדמת ===
[ ] 2FA
[ ] ניטור כניסות
[ ] חסימת IP

=== רספונסיביות ===
[ ] Desktop/Tablet/Mobile

=== שגיאות ===
[ ] שגיאות validation
[ ] שגיאות רשת
[ ] הרשאות חסרות

📊 ביצועים:
[ ] טעינה < 3s
[ ] חיפוש < 2s
[ ] עדכונים < 2s

✅ סה"כ PASS: ___/___
❌ סה"כ FAIL: ___/___
⚠️ סה"כ WARNING: ___/___
```

## 🚨 בעיות נפוצות לחיפוש

1. **איפוס סיסמה לא עובד** - בדוק שירות מייל
2. **הרשאות לא מתעדכנות** - בעיות בsession management
3. **מסננים לא עובדים** - שגיאות ב-query logic
4. **טעינה איטית** - יותר מדי משתמשים בעמוד
5. **מחיקה לא מוגנת** - בעיות בvalidation
6. **לוגים לא נרשמים** - בעיות באבטחה

## 🎯 נקודות קריטיות לבדיקה

1. **ניהול הרשאות** - אחריות עליונה!
2. **איפוס סיסמאות** - רגישות ביטחונית
3. **מחיקת משתמשים** - פעולה בלתי הפיכה
4. **היסטוריה ולוגים** - חובה לתיעוד
5. **הודעות אבטחה** - חייבות להגיע

---
**עדכון אחרון**: 2025-01-01  
**גרסה**: 1.0 