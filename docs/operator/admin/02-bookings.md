# 📅 בדיקות OPERATOR - ניהול הזמנות

## 🎯 מטרת הבדיקה
וידוא שמערכת ניהול ההזמנות עובדת תקין ומאפשרת לאדמין לנהל הזמנות בצורה מקיפה.

## 📍 נתיב הגישה
`/dashboard/admin/bookings`

## 🔐 בדיקות הרשאות

### 1.1 גישה מנהל בלבד
**פעולה**: נווט לדף עם משתמש מנהל
**תוצאה צפויה**: גישה מלאה לכל ההזמנות

### 1.2 חסימת גישה לא-מנהל
**פעולה**: נסה גישה עם משתמש רגיל
**תוצאה צפויה**: הפניה או שגיאה 403

## 📊 בדיקות תצוגת נתונים

### 2.1 טעינת רשימת הזמנות
**פעולה**: טען את הדף
**תוצאה צפויה**:
```
✅ רשימת הזמנות מוצגת
✅ כל הזמנה כולל: מספר הזמנה, תאריך, לקוח, מטפל, סטטוס
✅ Pagination עובד
✅ מיון לפי תאריך (חדש לישן)
```

### 2.2 פרטי הזמנה מפורטים
**פעולה**: לחץ על הזמנה לצפייה בפרטים
**תוצאה צפויה**:
```
✅ פרטי לקוח מלאים
✅ פרטי טיפול ומטפל
✅ פרטי תשלום ומחיר
✅ כתובת הטיפול
✅ היסטוריית שינויים
```

## 🔍 בדיקות מסננים וחיפוש

### 3.1 מסנן לפי סטטוס
**פעולה**: 
1. בחר סטטוס "confirmed" 
2. וודא שמוצגות רק הזמנות מאושרות

**תוצאה צפויה**: מסנן עובד ומציג תוצאות נכונות

### 3.2 מסנן לפי מטפל
**פעולה**:
1. בחר מטפל ספציפי
2. וודא שמוצגות רק הזמנות של מטפל זה

### 3.3 מסנן לפי תאריך
**פעולה**:
1. בחר טווח תאריכים
2. וודא שמוצגות רק הזמנות מהטווח

### 3.4 חיפוש חופשי
**פעולה**:
1. חפש לפי מספר הזמנה
2. חפש לפי שם לקוח
3. חפש לפי סוג טיפול

**תוצאה צפויה**: כל חיפוש מחזיר תוצאות רלוונטיות

## ✏️ בדיקות עריכת הזמנות

### 4.1 עריכת פרטי הזמנה
**פעולה**:
1. בחר הזמנה ולחץ "ערוך"
2. שנה תאריך/שעה
3. שנה הערות
4. שמור שינויים

**תוצאה צפויה**:
```
✅ שינויים נשמרים בהצלחה
✅ הודעת אישור מוצגת
✅ רשימת ההזמנות מתעדכנת
✅ לוג שינויים נרשם
```

### 4.2 שינוי סטטוס הזמנה
**פעולה**:
1. שנה סטטוס מ-"pending" ל-"confirmed"
2. שנה סטטוס ל-"completed"
3. שנה סטטוס ל-"cancelled"

**תוצאה צפויה**: כל שינוי סטטוס עובד וניכר ברשימה

### 4.3 הקצאת מטפל
**פעולה**:
1. בחר הזמנה ללא מטפל
2. לחץ "הקצה מטפל"
3. בחר מטפל מהרשימה
4. אשר הקצאה

**תוצאה צפויה**:
```
✅ מטפל מוקצה להזמנה
✅ הודעה נשלחת למטפל (אם מוגדר)
✅ סטטוס משתנה ל-"assigned"
```

## 💰 בדיקות ניהול תשלומים

### 5.1 עדכון סטטוס תשלום
**פעולה**:
1. בחר הזמנה עם תשלום pending
2. עדכן ל-"paid"
3. הוסף מזהה עסקה

**תוצאה צפויה**: סטטוס תשלום מתעדכן

### 5.2 ניהול החזרים
**פעולה**:
1. בחר הזמנה לביטול עם החזר
2. הזן סכום החזר
3. הזן מזהה עסקת החזר
4. אשר החזר

**תוצאה צפויה**:
```
✅ החזר מתבצע במערכת
✅ סטטוס משתנה ל-"refunded" 
✅ פרטי החזר נשמרים
```

## 🔔 בדיקות תקשורת

### 6.1 שליחת תזכורות
**פעולה**:
1. בחר הזמנה עתידית
2. לחץ "שלח תזכורת ללקוח"

**תוצאה צפויה**: הודעה על שליחת תזכורת

### 6.2 שליחת הודעות למטפלים
**פעולה**:
1. בחר הזמנה עם מטפל
2. שלח הודעה למטפל

**תוצאה צפויה**: הודעה נשלחת (SMS/Email/App)

## 📋 בדיקות ייצוא ודיווח

### 7.1 ייצוא רשימת הזמנות
**פעולה**:
1. החל מסננים
2. לחץ "ייצא ל-Excel/CSV"

**תוצאה צפויה**: קובץ מתקבל עם הנתונים המסוננים

### 7.2 דוח הכנסות
**פעולה**: צור דוח הכנסות לתקופה
**תוצאה צפויה**: דוח מדויק עם סיכומים

## ⚡ בדיקות פעולות מתקדמות

### 8.1 הקצאה אוטומטית למטפלים
**פעולה**:
1. בחר מספר הזמנות ללא מטפל
2. לחץ "הקצאה אוטומטית"

**תוצאה צפויה**: המערכת מוצאת מטפלים מתאימים

### 8.2 פעולות כמותיות (Bulk Actions)
**פעולה**:
1. בחר מספר הזמנות
2. בצע פעולה כמותית (שינוי סטטוס, מחיקה, etc.)

**תוצאה צפויה**: פעולה מתבצעת על כל ההזמנות הנבחרות

### 8.3 מחיקת הזמנות (זהירות!)
**פעולה**:
1. בחר הזמנה לבדיקה (לא אמיתית!)
2. לחץ מחק
3. אשר מחיקה

**תוצאה צפויה**:
```
✅ אזהרה ברורה לפני מחיקה
✅ דרישה לאישור כפול
✅ הזמנה נמחקת אם אושרה
```

## 📱 בדיקות רספונסיביות

### 9.1 תצוגה במכשירים שונים
**פעולה**: בדוק בDesktop/Tablet/Mobile
**תוצאה צפויה**:
```
✅ טבלה מתכווצת במובייל
✅ כפתורים נגישים
✅ מסננים עובדים בכל המסכים
```

## ⚠️ בדיקות שגיאות

### 10.1 שגיאות validation
**פעולה**: נסה לשמור נתונים לא תקינים
**תוצאה צפויה**: הודעות שגיאה ברורות בעברית

### 10.2 שגיאות רשת
**פעולה**: נתק אינטרנט ונסה פעולות
**תוצאה צפויה**: הודעות שגיאה מתאימות

### 10.3 הרשאות חסרות
**פעולה**: נסה פעולות עם משתמש ללא הרשאות
**תוצאה צפויה**: חסימה והודעה מתאימה

## ✅ דוח בדיקות - טמפלט

```
📅 BOOKINGS ADMIN - דוח בדיקות

📅 תאריך: ___________
👤 בודק: ___________
🌐 דפדפן: ___________

=== בדיקות הרשאות ===
[ ] גישה מנהל בלבד
[ ] חסימת גישה לא-מנהל

=== תצוגת נתונים ===
[ ] טעינת רשימת הזמנות
[ ] פרטי הזמנה מפורטים

=== מסננים וחיפוש ===
[ ] מסנן סטטוס
[ ] מסנן מטפל
[ ] מסנן תאריך
[ ] חיפוש חופשי

=== עריכת הזמנות ===
[ ] עריכת פרטי הזמנה
[ ] שינוי סטטוס
[ ] הקצאת מטפל

=== ניהול תשלומים ===
[ ] עדכון סטטוס תשלום
[ ] ניהול החזרים

=== תקשורת ===
[ ] שליחת תזכורות
[ ] הודעות למטפלים

=== ייצוא ודיווח ===
[ ] ייצוא רשימות
[ ] דוחות הכנסות

=== פעולות מתקדמות ===
[ ] הקצאה אוטומטית
[ ] פעולות כמותיות
[ ] מחיקת הזמנות

=== רספונסיביות ===
[ ] Desktop/Tablet/Mobile

=== שגיאות ===
[ ] שגיאות validation
[ ] שגיאות רשת
[ ] הרשאות חסרות

📊 ביצועים:
[ ] טעינה < 5s
[ ] חיפוש < 2s
[ ] עדכונים < 3s

✅ סה"כ PASS: ___/___
❌ סה"כ FAIL: ___/___
⚠️ סה"כ WARNING: ___/___
```

## 🚨 בעיות נפוצות לחיפוש

1. **טעינה איטית** - יותר מדי הזמנות בעמוד
2. **מסננים לא עובדים** - שגיאות JavaScript
3. **עדכונים לא נשמרים** - שגיאות validation
4. **חיפוש לא מדויק** - בעיות בquery
5. **הקצאות לא עובדות** - בעיות בלוגיקה
6. **הודעות לא נשלחות** - שירותי SMS/Email לא פעילים

---
**עדכון אחרון**: 2025-01-01  
**גרסה**: 1.0 